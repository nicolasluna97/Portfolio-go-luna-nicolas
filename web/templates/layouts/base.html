{{define "base"}}
<!doctype html>
<html lang="{{.Lang}}" data-theme="dark" data-lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{{.Title}}</title>

    <style>
      :root{
        --bg: #0b0f17;
        --bg2: rgba(255,255,255,.03);
        --text: #eaeaea;
        --muted: rgba(234,234,234,.75);
        --border: rgba(255,255,255,.10);
        --border2: rgba(255,255,255,.16);
        --accent: rgba(255,255,255,.92);
        --shadow: 0 10px 30px rgba(0,0,0,.35);

        /* escala base */
        --ui-scale: 1;
      }

      html[data-theme="light"]{
        --bg:#f5f6f8;
        --bg2: rgba(0,0,0,.03);
        --text:#0c0f14;
        --muted: rgba(12,15,20,.72);
        --border: rgba(0,0,0,.10);
        --border2: rgba(0,0,0,.16);
        --accent: rgba(0,0,0,.90);
        --shadow: 0 10px 30px rgba(0,0,0,.10);
      }

      /* Escalado para monitores grandes */
      @media (min-width: 2200px){
        :root{ --ui-scale: 1.35; } /* 1.30‚Äì1.45 */
      }

      *{box-sizing:border-box}
      html,body{height:100%}
      body{
        margin:0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
        background: var(--bg);
        color: var(--text);
      }

      a{color:inherit; text-decoration:none}
      a:hover{text-decoration:underline}

      .container{
        max-width: calc(1100px * var(--ui-scale));
        margin: 0 auto;
        padding: 0 calc(18px * var(--ui-scale));
      }

      .section{ padding: calc(90px * var(--ui-scale)) 0; }

      .section h2{
        margin:0 0 calc(18px * var(--ui-scale)) 0;
        font-size: calc(40px * var(--ui-scale));
        letter-spacing: -0.5px;
      }

      .muted{color: var(--muted)}

      /* NAVBAR */
      .nav{
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 999;
        backdrop-filter: blur(10px);
        background: rgba(0,0,0,.35);
        border-bottom: 1px solid rgba(255,255,255,.06);
      }
      html[data-theme="light"] .nav{
        background: rgba(245,246,248,.65);
        border-bottom: 1px solid rgba(0,0,0,.06);
      }
      .nav.scrolled{ background: rgba(0,0,0,.18); }
      html[data-theme="light"] .nav.scrolled{ background: rgba(245,246,248,.45); }

      .nav-inner{
        height: calc(62px * var(--ui-scale));
        display:flex;
        align-items:center;
        gap: calc(14px * var(--ui-scale));
      }
      .nav-left{
        flex: 1;
        font-weight: 700;
        opacity: .95;
        font-size: calc(16px * var(--ui-scale));
      }
      .nav-center{
        display:flex;
        gap: calc(18px * var(--ui-scale));
        justify-content:center;
        flex: 2;
      }
      .nav-center a{
        opacity: .85;
        font-weight: 600;
        padding: calc(6px * var(--ui-scale)) calc(6px * var(--ui-scale));
        text-decoration:none;
        font-size: calc(14px * var(--ui-scale));
      }
      .nav-center a:hover{opacity:1}
      .nav-right{
        flex: 1;
        display:flex;
        justify-content:flex-end;
        gap: calc(12px * var(--ui-scale));
        align-items:center;
      }

      /* SWITCHES */
      .switch{
        display:flex; align-items:center; gap: calc(10px * var(--ui-scale));
        user-select:none;
      }
      .switch-label{
        font-size: calc(12px * var(--ui-scale));
        opacity: .85;
        font-weight: 700;
        letter-spacing: .2px;
      }
      .toggle{
        position: relative;
        width: calc(70px * var(--ui-scale));
        height: calc(28px * var(--ui-scale));
        border-radius: 999px;
        border: 1px solid var(--border2);
        background: var(--bg2);
        box-shadow: var(--shadow);
        cursor: pointer;
      }
      .knob{
        position:absolute;
        top: calc(3px * var(--ui-scale));
        left: calc(3px * var(--ui-scale));
        width: calc(22px * var(--ui-scale));
        height: calc(22px * var(--ui-scale));
        border-radius: 999px;
        background: var(--accent);
        transition: transform .22s ease;
      }
      .toggle[data-pos="right"] .knob{ transform: translateX(calc(40px * var(--ui-scale))); }

      .toggle .icon-left, .toggle .icon-right{
        position:absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: calc(13px * var(--ui-scale));
        opacity: .95;
        pointer-events:none;
      }
      .toggle .icon-left{ left: calc(9px * var(--ui-scale)); }
      .toggle .icon-right{ right: calc(9px * var(--ui-scale)); }

      .toggle .txt-left, .toggle .txt-right{
        position:absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: calc(12px * var(--ui-scale));
        font-weight: 900;
        opacity: .55;
        pointer-events:none;
      }
      .toggle .txt-left{ left: calc(8px * var(--ui-scale)); }
      .toggle .txt-right{ right: calc(8px * var(--ui-scale)); }
      .toggle[data-pos="left"] .txt-left{ opacity: 1; }
      .toggle[data-pos="right"] .txt-right{ opacity: 1; }

      /* HERO */
      .hero{ padding-top: calc(75px * var(--ui-scale)); }

      .hero-grid{
        display:grid;
        grid-template-columns: 1.3fr .7fr;
        gap: calc(26px * var(--ui-scale));
        align-items:center;
      }
      @media (max-width: 900px){
        .hero-grid{ grid-template-columns: 1fr; }
        .nav-center{ display:none; }
      }

      .hero h1{
        margin:0;
        font-size: calc(54px * var(--ui-scale));
        letter-spacing: -1px;
        line-height: 1.05;
      }
      .hero h1 .role{
        display:block;
        font-size: calc(44px * var(--ui-scale));
        opacity: .95;
      }
      .hero h1 .name{
        display:block;
        font-size: calc(46px * var(--ui-scale));
        margin-top: calc(10px * var(--ui-scale));
      }
      .hero p{
        margin-top: calc(16px * var(--ui-scale));
        max-width: calc(720px * var(--ui-scale));
        line-height: 1.7;
        font-size: calc(16px * var(--ui-scale));
        color: var(--muted);
      }

      .avatar{
        width: calc(260px * var(--ui-scale));
        height: calc(260px * var(--ui-scale));
        border-radius: 999px;
        border: 1px solid var(--border);
        background:
          radial-gradient(circle at 30% 30%, rgba(255,255,255,.14), transparent 55%),
          radial-gradient(circle at 70% 70%, rgba(255,255,255,.08), transparent 55%),
          rgba(255,255,255,.03);
        box-shadow: var(--shadow);
        margin-left:auto;
        display:flex;
        align-items:center;
        justify-content:center;
        font-weight: 900;
        letter-spacing: 1px;
        opacity: .9;
        font-size: calc(14px * var(--ui-scale));
      }

      .social{
        margin-top: calc(18px * var(--ui-scale));
        display:flex;
        gap: calc(14px * var(--ui-scale));
        align-items:center;
      }

      .icon-btn{
        width: calc(54px * var(--ui-scale));
        height: calc(54px * var(--ui-scale));
        border-radius: calc(16px * var(--ui-scale));
        border: 1px solid var(--border2);
        background: var(--bg2);
        display:flex;
        align-items:center;
        justify-content:center;
        box-shadow: var(--shadow);
        text-decoration:none;
        transition: transform .12s ease;
        font-size: calc(18px * var(--ui-scale));
        font-weight: 900;
      }
      .icon-btn:hover{ transform: translateY(-2px); }

      .social-icon{
        width: calc(22px * var(--ui-scale));
        height: calc(22px * var(--ui-scale));
        display: block;
      }
      html[data-theme="dark"] .social-icon{
        filter: invert(1) brightness(1.15);
        opacity: .95;
      }

      /* STACK */
      .stack-grid{
        display:grid;
        grid-template-columns: repeat(6, 1fr);
        gap: calc(14px * var(--ui-scale));
      }
      @media (max-width: 1000px){ .stack-grid{ grid-template-columns: repeat(4, 1fr);} }
      @media (max-width: 650px){ .stack-grid{ grid-template-columns: repeat(2, 1fr);} }

      .stack-item{
        border: 1px solid var(--border);
        background: var(--bg2);
        border-radius: calc(16px * var(--ui-scale));
        padding: calc(18px * var(--ui-scale)) calc(14px * var(--ui-scale));
        text-align:center;
        box-shadow: var(--shadow);
      }
      .stack-logo{
        width: calc(44px * var(--ui-scale));
        height: calc(44px * var(--ui-scale));
        margin: 0 auto calc(10px * var(--ui-scale));
        border-radius: calc(12px * var(--ui-scale));
        border: 1px solid var(--border2);
        display:flex;
        align-items:center;
        justify-content:center;
        opacity: .95;
      }
      .stack-logo img{
        width: calc(26px * var(--ui-scale));
        height: calc(26px * var(--ui-scale));
        display:block;
      }
      html[data-theme="dark"] .stack-logo img{
        filter: invert(1) brightness(1.2);
        opacity: 0.95;
      }
      .stack-name{
        font-weight: 800;
        opacity: .95;
        font-size: calc(14px * var(--ui-scale));
      }

      /* PROJECTS */
      .projects-grid{
        display:grid;
        grid-template-columns: repeat(3, 1fr);
        gap: calc(22px * var(--ui-scale));
        align-items: stretch;
      }
      @media (max-width: 1100px){ .projects-grid{ grid-template-columns: 1fr; } }

      .flip{ perspective: 1000px; }

      .flip-inner{
        position: relative;
        width: 100%;
        height: calc(440px * var(--ui-scale));
        transition: transform .6s;
        transform-style: preserve-3d;
      }
      .flip:hover .flip-inner{ transform: rotateY(180deg); }

      .card-face{
        position:absolute;
        inset:0;
        border-radius: calc(18px * var(--ui-scale));
        border: 1px solid var(--border);
        background: var(--bg2);
        box-shadow: var(--shadow);
        backface-visibility: hidden;
        overflow:hidden;
      }

      .front{
        display:flex;
        flex-direction:column;
      }
      .front .img{
        flex: 0 0 calc(220px * var(--ui-scale));
        border-bottom: 1px solid var(--border);
        background:
          radial-gradient(circle at 30% 30%, rgba(255,255,255,.12), transparent 60%),
          rgba(255,255,255,.03);
        position: relative;
      }
      .front .img img{
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      .front .body{
        padding: calc(18px * var(--ui-scale)) calc(18px * var(--ui-scale)) calc(20px * var(--ui-scale));
      }

      .front .title{
        font-weight: 900;
        font-size: calc(20px * var(--ui-scale));
        margin: 0 0 calc(8px * var(--ui-scale)) 0;
        line-height: 1.2;
      }

      .front .desc{
        margin: 0;
        color: var(--muted);
        line-height: 1.7;
        font-size: calc(14px * var(--ui-scale));
      }

      .back{
        transform: rotateY(180deg);
        padding: calc(20px * var(--ui-scale));
        display:flex;
        flex-direction:column;
        gap: calc(12px * var(--ui-scale));
      }

      .badge{
        display:inline-block;
        padding: calc(7px * var(--ui-scale)) calc(12px * var(--ui-scale));
        border:1px solid var(--border2);
        border-radius:999px;
        font-size: calc(12px * var(--ui-scale));
        font-weight:900;
        opacity:.92;
      }

      .tech{
        display:flex;
        flex-wrap:wrap;
        gap: calc(8px * var(--ui-scale));
        margin-top: calc(8px * var(--ui-scale));
      }
      .tech .t{
        padding: calc(6px * var(--ui-scale)) calc(10px * var(--ui-scale));
        border:1px solid var(--border);
        border-radius:999px;
        font-size: calc(12px * var(--ui-scale));
        opacity:.92;
      }

      .btn{
        margin-top: auto;
        width: 100%;
        padding: calc(14px * var(--ui-scale)) calc(14px * var(--ui-scale));
        border-radius: calc(14px * var(--ui-scale));
        border: 1px solid var(--border2);
        background: rgba(255,255,255,.06);
        color: var(--text);
        font-weight: 900;
        cursor:pointer;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        font-size: calc(14px * var(--ui-scale));
      }
      html[data-theme="light"] .btn{ background: rgba(0,0,0,.05); }

      /* Ajustes mobile (no tocamos ui-scale, solo layout) */
      @media (max-width: 600px){
        .flip-inner{ height: 520px; }
        .front .img{ flex: 0 0 200px; }
      }

      /* CONTACT */
      .contact{
        display:flex;
        gap: calc(14px * var(--ui-scale));
        align-items:center;
        flex-wrap:wrap;
      }
      .contact a{ text-decoration:none; }
      .contact .big{
        padding: calc(14px * var(--ui-scale)) calc(16px * var(--ui-scale));
        border-radius: calc(16px * var(--ui-scale));
        border: 1px solid var(--border);
        background: var(--bg2);
        box-shadow: var(--shadow);
        font-weight: 900;
        font-size: calc(14px * var(--ui-scale));
      }

      /* Smooth scroll */
      html{ scroll-behavior: smooth; }
      .anchor-offset{ scroll-margin-top: calc(80px * var(--ui-scale)); }

      /* i18n ES/EN por data-lang */
      .lang-en { display: none; }
      html[data-lang="en"] .lang-es { display: none; }
      html[data-lang="en"] .lang-en { display: inline; }

      /* Proyecto (p√°ginas) */
      .project-page{
        padding-top: calc(40px * var(--ui-scale));
      }
      .project-back{
        display:inline-flex;
        gap: calc(10px * var(--ui-scale));
        align-items:center;
        font-weight:900;
        opacity:.9;
        text-decoration:none;
      }
      .project-center{
        text-align:center;
        margin-top: calc(18px * var(--ui-scale));
      }
      .project-title{
        margin: calc(16px * var(--ui-scale)) 0 calc(10px * var(--ui-scale)) 0;
        font-size: calc(44px * var(--ui-scale));
        letter-spacing:-1px;
        line-height: 1.1;
      }
      .project-desc{
        max-width: calc(900px * var(--ui-scale));
        margin: 0 auto;
        line-height: 1.7;
        font-size: calc(16px * var(--ui-scale));
        color: var(--muted);
      }
      .project-meta{
        margin-top: calc(14px * var(--ui-scale));
        display:flex;
        gap: calc(10px * var(--ui-scale));
        justify-content:center;
        flex-wrap:wrap;
      }
      .project-block{
        margin-top: calc(50px * var(--ui-scale));
      }
      .project-block h2{
        text-align:center;
        margin-bottom: calc(26px * var(--ui-scale));
      }
      .project-stack{
        display:flex;
        flex-direction:column;
        gap: calc(44px * var(--ui-scale));
        max-width: calc(980px * var(--ui-scale));
        margin: 0 auto;
      }
      .project-shot{
        width: min(calc(520px * var(--ui-scale)), 100%);
        border-radius: calc(18px * var(--ui-scale));
        overflow:hidden;
        border: 1px solid var(--border);
        box-shadow: var(--shadow);
        background: var(--bg2);
      }
      .project-shot img{
        width:100%;
        height:auto;
        display:block;
      }
      .project-notes{
        max-width: calc(980px * var(--ui-scale));
        margin: calc(22px * var(--ui-scale)) auto 0;
        padding: calc(18px * var(--ui-scale)) calc(18px * var(--ui-scale));
        border-radius: calc(18px * var(--ui-scale));
        border: 1px solid var(--border);
        background: var(--bg2);
        box-shadow: var(--shadow);
      }
      .project-notes h3{
        font-size: calc(25px * var(--ui-scale));
        font-weight: 700;
        text-align: center;
        margin-top: 0;
      }

      .tech-chip{
        padding: calc(8px * var(--ui-scale)) calc(12px * var(--ui-scale));
        border-radius: 999px;
        border: 1px solid var(--border);
        background: var(--bg2);
        box-shadow: var(--shadow);
        font-weight: 900;
        font-size: calc(12px * var(--ui-scale));
      }
    </style>
  </head>

  <body>
    {{if not .HideNav}}
    <header class="nav" id="navbar">
      <div class="container">
        <div class="nav-inner">
          <div class="nav-left" data-i18n="nav.left">{{.Role}}</div>

          <nav class="nav-center">
            <a href="#inicio" data-i18n="nav.home">Inicio</a>
            <a href="#stack" data-i18n="nav.stack">Stack</a>
            <a href="#proyectos" data-i18n="nav.projects">Proyectos</a>
            <a href="#contacto" data-i18n="nav.contact">Contacto</a>
          </nav>

          <div class="nav-right">
            <div class="switch" title="Tema">
              <div class="switch-label" data-i18n="toggle.theme">Tema</div>
              <div class="toggle" id="themeToggle" data-pos="left" aria-label="toggle theme">
                <span class="icon-left">üåô</span>
                <span class="icon-right">‚òÄÔ∏è</span>
                <span class="knob"></span>
              </div>
            </div>

            <div class="switch" title="Idioma">
              <div class="switch-label" data-i18n="toggle.lang">Idioma</div>
              <div class="toggle" id="langToggle" data-pos="left" aria-label="toggle language">
                <span class="txt-left">ES</span>
                <span class="txt-right">EN</span>
                <span class="knob"></span>
              </div>
            </div>
          </div>

        </div>
      </div>
    </header>
    {{end}}

    <main class="container">
      {{template "content" .}}
    </main>

    <script>
      // Navbar scrolled (si existe)
      const navbar = document.getElementById("navbar");
      const onScroll = () => {
        if (!navbar) return;
        if (window.scrollY > 18) navbar.classList.add("scrolled");
        else navbar.classList.remove("scrolled");
      };
      window.addEventListener("scroll", onScroll);
      onScroll();

      // THEME
      const themeToggle = document.getElementById("themeToggle");
      const setTheme = (theme) => {
        document.documentElement.setAttribute("data-theme", theme);
        localStorage.setItem("theme", theme);
        if (themeToggle) themeToggle.dataset.pos = (theme === "light") ? "right" : "left";
      };
      const savedTheme = localStorage.getItem("theme") || "dark";
      setTheme(savedTheme);

      if (themeToggle) {
        themeToggle.addEventListener("click", () => {
          const current = document.documentElement.getAttribute("data-theme") || "dark";
          setTheme(current === "dark" ? "light" : "dark");
        });
      }

      // LANG
      const langToggle = document.getElementById("langToggle");

      const dict = {
        es: {
          "nav.left": "Desarrollador Full Stack",
          "nav.home": "Inicio",
          "nav.stack": "Stack",
          "nav.projects": "Proyectos",
          "nav.contact": "Contacto",
          "toggle.theme": "Tema",
          "toggle.lang": "Idioma",
          "hero.role": "Desarrollador Full Stack",
          "hero.name": "Luna Nicol√°s Ezequiel",
          "hero.summary1": "Desarrollo aplicaciones web y sitios con interfaces claras, APIs robustas y despliegues ordenados. Enfocado en performance, mantenibilidad y experiencia de usuario.",
          "hero.summary2": "La pasi√≥n por la programaci√≥n me llev√≥ a ser autodidacta: aprendo r√°pido, me adapto a nuevas tecnolog√≠as y busco mejorar continuamente mi forma de trabajar.",
          "stack.title": "Stack",
          "projects.title": "Proyectos",
          "projects.subtitle": "Tarjetas con resumen + detalles (flip).",
          "projects.freelance": "Freelancer",
          "projects.access": "Acceder a proyecto",
          "contact.title": "Contacto",
          "contact.subtitle": "Si te interesa trabajar conmigo, estos son mis canales:"
        },
        en: {
          "nav.left": "Full Stack Developer",
          "nav.home": "Home",
          "nav.stack": "Stack",
          "nav.projects": "Projects",
          "nav.contact": "Contact",
          "toggle.theme": "Theme",
          "toggle.lang": "Language",
          "hero.role": "Full Stack Developer",
          "hero.name": "Luna Nicol√°s Ezequiel",
          "hero.summary1": "I build web applications and websites with clean interfaces, reliable APIs, and structured deployments. Focused on performance, maintainability, and user experience.",
          "hero.summary2": "My passion for programming made me self-taught: I learn fast, adapt to new technologies, and continuously improve the way I work.",
          "stack.title": "Stack",
          "projects.title": "Projects",
          "projects.subtitle": "Cards with summary + details (flip).",
          "projects.freelance": "Freelance",
          "projects.access": "Open project",
          "contact.title": "Contact",
          "contact.subtitle": "If you want to reach out, here are my channels:"
        }
      };

      const setLang = (lang) => {
        document.documentElement.setAttribute("data-lang", lang);
        localStorage.setItem("lang", lang);
        if (langToggle) langToggle.dataset.pos = (lang === "en") ? "right" : "left";

        document.querySelectorAll("[data-i18n]").forEach(el => {
          const key = el.getAttribute("data-i18n");
          if (dict[lang] && dict[lang][key]) el.textContent = dict[lang][key];
        });
      };

      const savedLang = localStorage.getItem("lang") || "es";
      setLang(savedLang);

      if (langToggle) {
        langToggle.addEventListener("click", () => {
          const current = document.documentElement.getAttribute("data-lang") || "es";
          setLang(current === "es" ? "en" : "es");
        });
      }
    </script>
  </body>
</html>
{{end}}
