{{define "base"}}
<!doctype html>
<html lang="{{.Lang}}" data-theme="dark" data-lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{{.Title}}</title>

    <style>
      :root{
        --bg: #0b0f17;
        --bg2: rgba(255,255,255,.03);
        --text: #eaeaea;
        --muted: rgba(234,234,234,.75);
        --border: rgba(255,255,255,.10);
        --border2: rgba(255,255,255,.16);
        --accent: rgba(255,255,255,.92);
        --shadow: 0 10px 30px rgba(0,0,0,.35);
      }
      html[data-theme="light"]{
        --bg:#f5f6f8;
        --bg2: rgba(0,0,0,.03);
        --text:#0c0f14;
        --muted: rgba(12,15,20,.72);
        --border: rgba(0,0,0,.10);
        --border2: rgba(0,0,0,.16);
        --accent: rgba(0,0,0,.90);
        --shadow: 0 10px 30px rgba(0,0,0,.10);
      }

      *{box-sizing:border-box}
      html,body{height:100%}
      body{
        margin:0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
        background: var(--bg);
        color: var(--text);
      }

      a{color:inherit; text-decoration:none}
      a:hover{text-decoration:underline}

      .container{max-width:1100px; margin:0 auto; padding:0 18px;}
      .section{padding: 90px 0;}
      .section h2{
        margin:0 0 18px 0;
        font-size: 40px;
        letter-spacing: -0.5px;
      }
      .muted{color: var(--muted)}

      /* NAVBAR */
      .nav{
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 999;
        backdrop-filter: blur(10px);
        background: rgba(0,0,0,.35);
        border-bottom: 1px solid rgba(255,255,255,.06);
      }
      html[data-theme="light"] .nav{
        background: rgba(245,246,248,.65);
        border-bottom: 1px solid rgba(0,0,0,.06);
      }
      .nav.scrolled{ background: rgba(0,0,0,.18); }
      html[data-theme="light"] .nav.scrolled{ background: rgba(245,246,248,.45); }

      .nav-inner{
        height: 62px;
        display:flex;
        align-items:center;
        gap: 14px;
      }
      .nav-left{
        flex: 1;
        font-weight: 700;
        opacity: .95;
      }
      .nav-center{
        display:flex;
        gap: 18px;
        justify-content:center;
        flex: 2;
      }
      .nav-center a{
        opacity: .85;
        font-weight: 600;
        padding: 6px 6px;
        text-decoration:none;
      }
      .nav-center a:hover{opacity:1}
      .nav-right{
        flex: 1;
        display:flex;
        justify-content:flex-end;
        gap: 12px;
        align-items:center;
      }

      /* SWITCHES */
      .switch{
        display:flex; align-items:center; gap:10px;
        user-select:none;
      }
      .switch-label{
        font-size: 12px;
        opacity: .85;
        font-weight: 700;
        letter-spacing: .2px;
      }
      .toggle{
        position: relative;
        width: 70px;
        height: 28px;
        border-radius: 999px;
        border: 1px solid var(--border2);
        background: var(--bg2);
        box-shadow: var(--shadow);
        cursor: pointer;
      }
      .knob{
        position:absolute;
        top: 3px;
        left: 3px;
        width: 22px;
        height: 22px;
        border-radius: 999px;
        background: var(--accent);
        transition: transform .22s ease;
      }
      .toggle[data-pos="right"] .knob{ transform: translateX(40px); }

      .toggle .icon-left, .toggle .icon-right{
        position:absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: 13px;
        opacity: .95;
        pointer-events:none;
      }
      .toggle .icon-left{ left: 9px; }
      .toggle .icon-right{ right: 9px; }

      .toggle .txt-left, .toggle .txt-right{
        position:absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: 12px;
        font-weight: 900;
        opacity: .55;
        pointer-events:none;
      }
      .toggle .txt-left{ left: 8px; }
      .toggle .txt-right{ right: 8px; }
      .toggle[data-pos="left"] .txt-left{ opacity: 1; }
      .toggle[data-pos="right"] .txt-right{ opacity: 1; }

      /* HERO */
      .hero{ padding-top: 60px; }
      .hero-grid{
        display:grid;
        grid-template-columns: 1.3fr .7fr;
        gap: 26px;
        align-items:center;
      }
      @media (max-width: 900px){
        .hero-grid{ grid-template-columns: 1fr; }
        .nav-center{ display:none; }
      }

      .hero h1{
        margin:0;
        font-size: 54px;
        letter-spacing: -1px;
        line-height: 1.05;
      }
      .hero h1 .role{
        display:block;
        font-size: 44px;
        opacity: .95;
      }
      .hero h1 .name{
        display:block;
        font-size: 46px;
        margin-top: 10px;
      }
      .hero p{
        margin-top: 16px;
        max-width: 720px;
        line-height: 1.7;
        font-size: 16px;
        color: var(--muted);
      }

      .avatar{
        width: 260px; height: 260px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background:
          radial-gradient(circle at 30% 30%, rgba(255,255,255,.14), transparent 55%),
          radial-gradient(circle at 70% 70%, rgba(255,255,255,.08), transparent 55%),
          rgba(255,255,255,.03);
        box-shadow: var(--shadow);
        margin-left:auto;
        display:flex;
        align-items:center;
        justify-content:center;
        font-weight: 900;
        letter-spacing: 1px;
        opacity: .9;
      }

      .social{
        margin-top: 18px;
        display:flex;
        gap: 14px;
        align-items:center;
      }

      .icon-btn{
        width: 54px; height: 54px;
        border-radius: 16px;
        border: 1px solid var(--border2);
        background: var(--bg2);
        display:flex;
        align-items:center;
        justify-content:center;
        box-shadow: var(--shadow);
        text-decoration:none;
        transition: transform .12s ease;
        font-size: 18px;
        font-weight: 900;
      }
      .icon-btn:hover{ transform: translateY(-2px); }

      /* STACK */
      .stack-grid{
        display:grid;
        grid-template-columns: repeat(6, 1fr);
        gap: 14px;
      }
      @media (max-width: 1000px){ .stack-grid{ grid-template-columns: repeat(4, 1fr);} }
      @media (max-width: 650px){ .stack-grid{ grid-template-columns: repeat(2, 1fr);} }

      .stack-item{
        border: 1px solid var(--border);
        background: var(--bg2);
        border-radius: 16px;
        padding: 18px 14px;
        text-align:center;
        box-shadow: var(--shadow);
      }
      .stack-logo{
        width: 44px; height: 44px;
        margin: 0 auto 10px;
        border-radius: 12px;
        border: 1px solid var(--border2);
        display:flex;
        align-items:center;
        justify-content:center;
        opacity: .95;
      }
      .stack-logo img{
        width: 26px;
        height: 26px;
        display:block;
      }
      html[data-theme="dark"] .stack-logo img{
        filter: invert(1) brightness(1.2);
        opacity: 0.95;
      }
      .stack-name{ font-weight: 800; opacity: .95; }

      /* PROJECTS */
      .projects-grid{
        display:grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 22px;
        align-items: stretch;
      }
      @media (max-width: 1100px){ .projects-grid{ grid-template-columns: 1fr; } }

      .flip{ perspective: 1000px; }
      .flip-inner{
        position: relative;
        width: 100%;
        height: 420px;
        transition: transform .6s;
        transform-style: preserve-3d;
      }
      .flip:hover .flip-inner{ transform: rotateY(180deg); }

      .card-face{
        position:absolute;
        inset:0;
        border-radius: 18px;
        border: 1px solid var(--border);
        background: var(--bg2);
        box-shadow: var(--shadow);
        backface-visibility: hidden;
        overflow:hidden;
      }

      .front{ display:flex; flex-direction:column; }
      .front .img{
        flex: 1.2;
        border-bottom: 1px solid var(--border);
        background:
          radial-gradient(circle at 30% 30%, rgba(255,255,255,.12), transparent 60%),
          rgba(255,255,255,.03);
      }
      .front .img img{
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }
      .front .body{ padding: 18px; }
      .front .title{
        font-weight: 900;
        font-size: 20px;
        margin:0 0 10px 0;
      }
      .front .desc{ margin:0; color: var(--muted); line-height:1.7; }

      .back{
        transform: rotateY(180deg);
        padding: 20px;
        display:flex;
        flex-direction:column;
        gap: 12px;
      }
      .badge{
        display:inline-block;
        padding:7px 12px;
        border:1px solid var(--border2);
        border-radius:999px;
        font-size:12px;
        font-weight:900;
        opacity:.92;
      }
      .tech{ display:flex; flex-wrap:wrap; gap:8px; margin-top: 8px;}
      .tech .t{ padding:6px 10px; border:1px solid var(--border); border-radius:999px; font-size:12px; opacity:.92; }

      .btn{
        margin-top: auto;
        width: 100%;
        padding: 14px 14px;
        border-radius: 14px;
        border: 1px solid var(--border2);
        background: rgba(255,255,255,.06);
        color: var(--text);
        font-weight: 900;
        cursor:pointer;
        display:inline-flex;
        align-items:center;
        justify-content:center;
      }
      html[data-theme="light"] .btn{ background: rgba(0,0,0,.05); }

      /* CONTACT */
      .contact{
        display:flex;
        gap: 14px;
        align-items:center;
        flex-wrap:wrap;
      }
      .contact a{ text-decoration:none; }
      .contact .big{
        padding: 14px 16px;
        border-radius: 16px;
        border: 1px solid var(--border);
        background: var(--bg2);
        box-shadow: var(--shadow);
        font-weight: 900;
      }

      /* Smooth scroll */
      html{ scroll-behavior: smooth; }
      .anchor-offset{ scroll-margin-top: 80px; }

      /* i18n ES/EN por data-lang */
      .lang-en { display: none; }
      html[data-lang="en"] .lang-es { display: none; }
      html[data-lang="en"] .lang-en { display: inline; }

      .social-ico{
      width: 22px;
      height: 22px;
      display:block;
      }

      /* en modo oscuro, si el SVG es negro, lo invertimos */
      html[data-theme="dark"] .social-ico{
        filter: invert(1) brightness(1.15);
        opacity: .95;
      }

    </style>
  </head>

  <body>
    {{if not .HideNav}}
    <header class="nav" id="navbar">
      <div class="container">
        <div class="nav-inner">
          <div class="nav-left" data-i18n="nav.left">{{.Role}}</div>

          <nav class="nav-center">
            <a href="#inicio" data-i18n="nav.home">Inicio</a>
            <a href="#stack" data-i18n="nav.stack">Stack</a>
            <a href="#proyectos" data-i18n="nav.projects">Proyectos</a>
            <a href="#contacto" data-i18n="nav.contact">Contacto</a>
          </nav>

          <div class="nav-right">
            <div class="switch" title="Tema">
              <div class="switch-label" data-i18n="toggle.theme">Tema</div>
              <div class="toggle" id="themeToggle" data-pos="left" aria-label="toggle theme">
                <span class="icon-left">üåô</span>
                <span class="icon-right">‚òÄÔ∏è</span>
                <span class="knob"></span>
              </div>
            </div>

            <div class="switch" title="Idioma">
              <div class="switch-label" data-i18n="toggle.lang">Idioma</div>
              <div class="toggle" id="langToggle" data-pos="left" aria-label="toggle language">
                <span class="txt-left">ES</span>
                <span class="txt-right">EN</span>
                <span class="knob"></span>
              </div>
            </div>
          </div>

        </div>
      </div>
    </header>
    {{end}}

    <main class="container">
      {{template "content" .}}
    </main>

    <script>
      // Navbar scrolled (si existe)
      const navbar = document.getElementById("navbar");
      const onScroll = () => {
        if (!navbar) return;
        if (window.scrollY > 18) navbar.classList.add("scrolled");
        else navbar.classList.remove("scrolled");
      };
      window.addEventListener("scroll", onScroll);
      onScroll();

      // THEME
      const themeToggle = document.getElementById("themeToggle");
      const setTheme = (theme) => {
        document.documentElement.setAttribute("data-theme", theme);
        localStorage.setItem("theme", theme);
        if (themeToggle) themeToggle.dataset.pos = (theme === "light") ? "right" : "left";
      };
      const savedTheme = localStorage.getItem("theme") || "dark";
      setTheme(savedTheme);

      if (themeToggle) {
        themeToggle.addEventListener("click", () => {
          const current = document.documentElement.getAttribute("data-theme") || "dark";
          setTheme(current === "dark" ? "light" : "dark");
        });
      }

      // LANG
      const langToggle = document.getElementById("langToggle");

      const dict = {
        es: {
          "nav.left": "Desarrollador Full Stack",
          "nav.home": "Inicio",
          "nav.stack": "Stack",
          "nav.projects": "Proyectos",
          "nav.contact": "Contacto",
          "toggle.theme": "Tema",
          "toggle.lang": "Idioma",
          "hero.role": "Desarrollador Full Stack",
          "hero.name": "Luna Nicol√°s Ezequiel",
          "hero.summary": "Desarrollo aplicaciones web end-to-end: interfaces claras, APIs robustas y despliegues ordenados. Enfocado en performance, mantenibilidad y experiencia de usuario.",
          "stack.title": "Stack",
          "projects.title": "Proyectos",
          "projects.subtitle": "Tarjetas con resumen + detalles (flip).",
          "projects.freelance": "Freelancer",
          "projects.access": "Acceder a proyecto",
          "contact.title": "Contacto",
          "contact.subtitle": "Si te interesa trabajar conmigo, estos son mis canales:"
        },
        en: {
          "nav.left": "Full Stack Developer",
          "nav.home": "Home",
          "nav.stack": "Stack",
          "nav.projects": "Projects",
          "nav.contact": "Contact",
          "toggle.theme": "Theme",
          "toggle.lang": "Language",
          "hero.role": "Full Stack Developer",
          "hero.name": "Luna Nicol√°s Ezequiel",
          "hero.summary": "I build end-to-end web applications: clean UI, reliable APIs and structured deployments. Focused on performance, maintainability and user experience.",
          "stack.title": "Stack",
          "projects.title": "Projects",
          "projects.subtitle": "Cards with summary + details (flip).",
          "projects.freelance": "Freelance",
          "projects.access": "Open project",
          "contact.title": "Contact",
          "contact.subtitle": "If you want to reach out, here are my channels:"
        }
      };

      const setLang = (lang) => {
        document.documentElement.setAttribute("data-lang", lang);
        localStorage.setItem("lang", lang);
        if (langToggle) langToggle.dataset.pos = (lang === "en") ? "right" : "left";

        document.querySelectorAll("[data-i18n]").forEach(el => {
          const key = el.getAttribute("data-i18n");
          if (dict[lang] && dict[lang][key]) el.textContent = dict[lang][key];
        });
      };

      const savedLang = localStorage.getItem("lang") || "es";
      setLang(savedLang);

      if (langToggle) {
        langToggle.addEventListener("click", () => {
          const current = document.documentElement.getAttribute("data-lang") || "es";
          setLang(current === "es" ? "en" : "es");
        });
      }
    </script>
  </body>
</html>
{{end}}
